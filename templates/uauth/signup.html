{% extends "../layout/base.html" %} {% block style %}
<style>
  .feedback.error {
    color: red;
  }
  .feedback.success {
    color: green;
  }
  .signup-card {
    background: white;
    border-radius: 16px;
    padding: 40px;
    max-width: 400px;
    margin: 0 auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  .signup-title {
    font-size: 20px;
    font-weight: bold;
    text-align: center;
  }
  .signup-subtext {
    text-align: center;
    font-size: 14px;
    margin-bottom: 20px;
  }
</style>
{% endblock %} {% block content %}
<div
  class="container d-flex justify-content-center align-items-center"
  style="min-height: 100vh; background: #5a4ff3"
>
  <div class="signup-card">
    <div class="text-center mb-4">
        <div><a href="{% url 'main:index' %}" style="text-decoration: none; color: inherit;">ğŸ‡¶ ğŸ‡³ ğŸ‡¦</a></div>
    </div>
    <div class="signup-title">íšŒì›ê°€ì…</div>
    <div class="signup-subtext">
      ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <a href="{% url 'uauth:login' %}">ë¡œê·¸ì¸</a>
    </div>
    {% include "../layout/form_errors.html" %}
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="mb-3">
        <label for="username">ì•„ì´ë””</label>
        <input
          type="text"
          class="form-control"
          name="username"
          id="username"
          value="{{ form.username.value|default_if_none:'' }}"
        />
        <sub id="username-feedback" class="feedback"></sub>
      </div>
      <div class="mb-3">
        <label for="password1">ë¹„ë°€ë²ˆí˜¸</label>
        <input
          type="password"
          class="form-control"
          name="password1"
          id="password1"
          value="{{ form.password1.value | default_if_none:'' }}"
        />
      </div>
      <div class="mb-3">
        <label for="password2">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
        <input
          type="password"
          class="form-control"
          name="password2"
          id="password2"
          value="{{ form.password2.value | default_if_none:'' }}"
        />
      </div>
      <button type="submit" class="btn btn-primary w-100">íšŒì›ê°€ì…</button>
    </form>
  </div>
</div>
{% endblock %} {% block script %}
<script>
  const $username = document.querySelector("#username");
  const $usernameFeedback = document.querySelector("#username-feedback");

  $username.oninput = () => {
    const usernameValue = $username.value.trim();

    if (usernameValue.length < 4) {
      $usernameFeedback.textContent = "";
      return;
    }

    fetch(
      `{% url 'uauth:check_username' %}?username=${encodeURIComponent(
        usernameValue
      )}`
    )
      .then((res) => res.json())
      .then((data) => {
        if (data.available) {
          $usernameFeedback.textContent = "ì´ ì•„ì´ë””ëŠ” ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.";
          $usernameFeedback.classList.add("success");
          $usernameFeedback.classList.remove("error");
        } else {
          $usernameFeedback.textContent = "ì´ ì•„ì´ë””ëŠ” ì´ë¯¸ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤.";
          $usernameFeedback.classList.add("error");
          $usernameFeedback.classList.remove("success");
        }
      });
  };
</script>
{% endblock %}
